datadir <- './data1'
files <- list.files(datadir)
for (f in files){
filepath <- datadir+'/'+f
}
filepath <- file.path(datadir,f)
df <- data.frame()
View(df)
colnames(df) <- c("Compound", "Accepted Description")
View(df)
df <- data.frame(Compound = character(),Accepted Description=character())
df <- data.frame(Compound = character(),Description=character())
View(df)
data <- read.csv(filepath)
View(data)
df <- data.frame(Compound = character(),Accepted.Description=character())
data <- data[,c('Compound','Accepted.Description')]
View(data)
df <- rbind(df,data)
View(df)
df <- data.frame(Compound = character(),Accepted.Description=character())
for (f in files){
filepath <- file.path(datadir,f)
data <- read.csv(filepath)
data <- data[,c('Compound','Accepted.Description')]
df <- rbind(df,data)
df <- unique(df)
}
View(df)
write.csv(df,'MetaboliteName20250425.csv')
#add
df <- read.csv('./MetaboliteName20250425.csv')
View(df)
#add
df <- read.csv('./MetaboliteName20250425.csv',row.names = FALSE)
write.csv(df,'MetaboliteName20250425.csv',row.names = FALES)
write.csv(df,'MetaboliteName20250425.csv',row.names = FALSE)
#add
df <- read.csv('./MetaboliteName20250425.csv'
)
View(df)
View(df)
# First
datadir <- './data1'
files <- list.files(datadir)
df <- data.frame(Compound = character(),Accepted.Description=character())
for (f in files){
filepath <- file.path(datadir,f)
data <- read.csv(filepath)
data <- data[,c('Compound','Accepted.Description')]
df <- rbind(df,data)
df <- unique(df)
}
View(df)
write.csv(df,'MetaboliteName20250425.csv',row.names = FALSE)
View(df)
#add
df <- read.csv('./MetaboliteName20250425.csv')
View(df)
newdatadir <- './data2'
files <- list.files(newdatadir)
newfiles <- list.files(newdatadir)
for (newf in newfiles){
filepath <- file.path(newdatadir,newf)
data <- read.csv(filepath)
data <- data[,c('Compound','Accepted.Description')]
df <- rbind(df,data)
df <- unique(df)
}
View(data)
View(df)
table(df$Compound)
length(unque(df$Compound))
length(unique(df$Compound))
# 统计每个 Compound 的频率
compound_counts <- table(df$Compound)
# 提取出现次数 >1 的 Compound（即重复项）
repeated_compounds <- names(compound_counts[compound_counts > 1])
df <- df %>%
filter(!is.na(Accepted.Description))
library(dplyr)
df <- df %>%
filter(!is.na(Accepted.Description))
View(df)
df <- df[!duplicated(df$Compound), ]
write.csv(df,'MetaboliteName20250425V2.csv')
repeated_compounds
View(df)
length(unique(df$Accepted.Description))
df <- df %>%
filter(!is.na(Accepted.Description) & df$Accepted.Description != "")
#add
df <- read.csv('./MetaboliteName20250425.csv')
newdatadir <- './data2'
newfiles <- list.files(newdatadir)
for (newf in newfiles){
filepath <- file.path(newdatadir,newf)
data <- read.csv(filepath)
data <- data[,c('Compound','Accepted.Description')]
df <- rbind(df,data)
df <- unique(df)
}
# 统计每个 Compound 的频率
compound_counts <- table(df$Compound)
# 提取出现次数 >1 的 Compound（即重复项）
repeated_compounds <- names(compound_counts[compound_counts > 1])
df <- df %>%
filter(!is.na(Accepted.Description) & df$Accepted.Description != "")
df <- df[!duplicated(df$Compound), ]
write.csv(df,'MetaboliteName20250425V2.csv')
library(jsonlite)
request_url <- "https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/glucose/JSON"
response <- fromJSON(request_url)
response <- fromJSON(request_url)
request_url <- "https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/glucose/json"
response <- fromJSON(request_url)
request_url <- "https://pubchem.ncbi.nlm.nih.gov/rest/pug/Compound/name/glucose/json"
response <- fromJSON(request_url)
library(XML)
doc = xmlPars('../HMDB/hmdb_metabolites.xml')
library(XML)
doc = xmlPars('../HMDB/hmdb_metabolites.xml')
doc = xmlParse('../HMDB/hmdb_metabolites.xml')
root = xmlRoot(doc)
root[[1]]
size <- xmlSize(root)
root[[1]][c('name')]
root[[1]][c('Compound')]
root[[1]][c('xz')]
root[[1]][c('ID')]
# First
datadir <- './data1'
files <- list.files(datadir)
df <- data.frame(Compound = character(),Accepted.Compound.ID = character(),Accepted.Description=character())
for (f in files){
filepath <- file.path(datadir,f)
data <- read.csv(filepath)
df <- rbind(df,data)
df <- unique(df)
}
write.csv(df,'MetaboliteName20250425.csv',row.names = FALSE)
library(dplyr)
#add
df <- read.csv('./MetaboliteName20250425.csv')
newdatadir <- './data2'
newfiles <- list.files(newdatadir)
data <- read.csv(filepath)
for (newf in newfiles){
filepath <- file.path(newdatadir,newf)
data <- read.csv(filepath)
df <- rbind(df,data)
df <- unique(df)
}
# 统计每个 Compound 的频率
compound_counts <- table(df$Compound)
# 提取出现次数 >1 的 Compound（即重复项）
repeated_compounds <- names(compound_counts[compound_counts > 1])
df <- df %>%
filter(!is.na(Accepted.Description) & df$Accepted.Description != "")
df <- df[!duplicated(df$Compound), ]
View(df)
write.csv(df,'MetaboliteName20250425V2.csv',row.names = FALSE)
